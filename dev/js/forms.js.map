{"version":3,"sources":["forms.js"],"names":["numOfWeek","document","querySelector","numOfDishes","priceDerDish","paragraphsForm","querySelectorAll","orderBtn","emailInputs","input","addEventListener","validationEmail","orderBtnClick","event","preventDefault","openPopUp","currentEl","currentTarget","value","addError","nextElementSibling","test","removeError","paragraph","text","classList","add","innerHTML","remove","changeTotal","total","addSpace","Math","round","num","newNum","numSTR","String","i","j","length","substr"],"mappings":"AAAA,aAEA,MAAMA,UAAYC,SAASC,cAAc,cACnCC,YAAcF,SAASC,cAAc,gBACrCE,aAAe,IACfC,eAAiBJ,SAASK,iBAAiB,gCAC3CC,SAAWN,SAASC,cAAc,qBAClCM,YAAcP,SAASK,iBAAiB,qBAE9C,IAAK,IAAIG,KAASD,YACjBC,EAAMC,iBAAiB,QAASC,iBAcjC,SAASC,cAAcC,GACtBA,EAAMC,iBACNC,YAGD,SAASJ,gBAAgBE,GACxB,MACMG,EAAYH,EAAMI,cAGD,IAAnBD,EAAUE,MACbC,SAAUH,EAAWA,EAAUI,mBAAoB,iBALzC,uCAMIC,KAAKL,EAAUE,OAG7BI,YAAYN,EAAWA,EAAUI,oBAFjCD,SAAUH,EAAYA,EAAUI,mBAAoB,4BAMtD,SAASD,SAASV,EAAOc,EAAWC,GACnCf,EAAMgB,UAAUC,IAAI,oBACpBH,EAAUI,UAAYH,EAGvB,SAASF,YAAYb,EAAOc,GAC3Bd,EAAMgB,UAAUG,OAAO,oBACvBL,EAAUI,UAAY,GAGvB,SAASE,cACR,IAAIC,EAlDgB,IAkDO9B,UAAUkB,MAAQ,EAAIf,YAAYe,MAC7Db,eAAe,GAAGsB,UAAYI,SAASD,GAAQ,KAC/CzB,eAAe,GAAGsB,UAAYI,SAASC,KAAKC,MAAY,GAANH,EAAS,MAAO,KAGnE,SAASC,SAASG,GACjB,IAAIC,EAAS,GACTC,EAASC,OAAOH,GAChBI,EAAE,EACFC,EAAE,EACFC,EAASJ,EAAOI,OACpB,GACCL,EAAQC,EAAOK,QAAQH,EAAGC,GAAI,IAAMJ,EACpCK,GAAcF,EACVE,EAAS,GAAM,IAClBD,EAAIC,GAELF,GAAI,QACIE,EAAO,GAChB,OAAOL,EA5DRnC,UAAUU,iBAAiB,SAAS,KACX,MAApBV,UAAUkB,OAAqC,KAApBlB,UAAUkB,QACxClB,UAAUkB,MAAQ,GAEnBW,iBAGD1B,YAAYO,iBAAiB,SAAUmB,aAEvCtB,SAASG,iBAAiB,QAASE","file":"forms.js","sourcesContent":["\"use strict\";\r\n\r\nconst numOfWeek = document.querySelector(\"#numOfWeek\");\r\nconst numOfDishes = document.querySelector(\"#numOfDishes\");\r\nconst priceDerDish = 195; \r\nconst paragraphsForm = document.querySelectorAll(\".captionForm__paragraph span\");\r\nconst orderBtn = document.querySelector(\".orderForm button\");\r\nconst emailInputs = document.querySelectorAll(\".inputForm--email\");\r\n\r\nfor (let input of emailInputs) {\r\n\tinput.addEventListener(\"input\", validationEmail);\r\n}\r\n\r\nnumOfWeek.addEventListener(\"input\", () => {\r\n\tif (numOfWeek.value === \"0\" || numOfWeek.value === \"\") {\r\n\t\tnumOfWeek.value = 1\r\n\t};\r\n\tchangeTotal();\r\n})\r\n\r\nnumOfDishes.addEventListener(\"change\", changeTotal);\r\n\r\norderBtn.addEventListener(\"click\", orderBtnClick);\r\n\r\nfunction orderBtnClick(event) {\r\n\tevent.preventDefault();\r\n\topenPopUp();\r\n}\r\n\r\nfunction validationEmail(event) {\r\n\tconst re = /[A-Za-z0-9]+@[A-Za-z0-9]+\\.[A-Za-z]+/;\r\n\tconst currentEl = event.currentTarget;\r\n\t// let errorArray = arrayByForm(this.closest(\"form\"));\r\n\r\n\tif (currentEl.value == \"\") {\r\n\t\taddError (currentEl, currentEl.nextElementSibling, \"Укажите email\");\r\n\t} else if (!re.test(currentEl.value)) {\r\n\t\taddError (currentEl , currentEl.nextElementSibling, \"Укажите корректный email\"); \r\n\t}  else {\r\n\t\tremoveError(currentEl, currentEl.nextElementSibling);\r\n\t};\r\n}\r\n\r\nfunction addError(input, paragraph, text) {\r\n\tinput.classList.add(\"inputForm--error\");\r\n\tparagraph.innerHTML = text;\r\n}\r\n\r\nfunction removeError(input, paragraph)  {\r\n\tinput.classList.remove(\"inputForm--error\");\r\n\tparagraph.innerHTML = \"\";\r\n} \r\n\r\nfunction changeTotal() {\r\n\tlet total = priceDerDish * numOfWeek.value * 7 * numOfDishes.value;\r\n\tparagraphsForm[1].innerHTML = addSpace(total) +\" ₽\"; \r\n\tparagraphsForm[2].innerHTML = addSpace(Math.round(total*70/100)) +\" ₽\"; \r\n}\r\n\r\nfunction addSpace(num) {\r\n\tlet newNum = \"\";\r\n\tlet numSTR = String(num);\r\n\tlet i=3;\r\n\tlet j=3;\r\n\tlet length = numSTR.length; \r\n\tdo {\r\n\t\tnewNum =numSTR.substr(-i, j) +\" \" + newNum;  \r\n\t\tlength=length-i;\r\n\t\tif (length % 3 !== 0) {\r\n\t\t\tj = length;  \r\n\t\t} \r\n\t\ti=i+3;\r\n\t} while (length>0);\r\n\treturn newNum; \r\n}"]}